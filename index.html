<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Rem√©dios</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        .container {
            margin-top: 20px;
        }
        .date-display {
            text-align: center;
            margin-bottom: 15px;
        }
        .date-display h3 {
            margin: 0;
            font-size: 2rem;
        }
        .date-display span {
            font-size: 1.2rem;
            color: gray;
        }
        .btn-large {
            font-size: 1.5rem;
            padding: 10px 20px;
            width: 100%;
        }
        .period-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        .remedio-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1.2rem;
        }
        .remedio-item.taken {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .remedio-item.pending {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .remedio-item.late {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .remedio-item.late .remedio-info {
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center text-primary mb-4">Gerenciador de Rem√©dios</h1>

        <!-- Data e navega√ß√£o -->
        <div class="date-display">
            <span id="current-day">Domingo</span>
            <h3 id="current-date">08/12/2024</h3>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-4">
            <button class="btn btn-outline-primary btn-large" onclick="changeDate(-1)">‚Üê Ontem</button>
            <button class="btn btn-outline-primary btn-large" onclick="changeDate(1)">Amanh√£ ‚Üí</button>
        </div>

        <!-- Manh√£ -->
        <div class="mb-4">
            <h4 class="period-title text-success">‚òÄÔ∏è Manh√£</h4>
            <ul class="list-group" id="remedio-manha">
                <!-- Lista de rem√©dios da manh√£ -->
            </ul>
        </div>

        <!-- Tarde -->
        <div class="mb-4">
            <h4 class="period-title text-warning">üå§Ô∏è Tarde</h4>
            <ul class="list-group" id="remedio-tarde">
                <!-- Lista de rem√©dios da tarde -->
            </ul>
        </div>

        <!-- Noite -->
        <div class="mb-4">
            <h4 class="period-title text-primary">üåô Noite</h4>
            <ul class="list-group" id="remedio-noite">
                <!-- Lista de rem√©dios da noite -->
            </ul>
        </div>
    </div>

    <!-- Modal de Alerta -->
    <div class="modal fade" id="remedioModal" tabindex="-1" aria-labelledby="remedioModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="remedioModalLabel">Alerta de Rem√©dio N√£o Tomado</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="remedioAlertText">Voc√™ n√£o tomou o rem√©dio no hor√°rio!</p>
                    <p><strong>Por favor, tome o rem√©dio o mais r√°pido poss√≠vel.</strong></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary" onclick="marcarTomadoAtual()">Marcar como Tomado</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const remedios = [
            { id: 1, nome: 'Paracetamol', horario: '08:00', periodo: 'manh√£', tomado: false },
            { id: 2, nome: 'Aspirina', horario: '12:30', periodo: 'tarde', tomado: true },
            { id: 3, nome: 'Amoxicilina', horario: '20:00', periodo: 'noite', tomado: false },
        ];

        const listas = {
            manh√£: document.getElementById('remedio-manha'),
            tarde: document.getElementById('remedio-tarde'),
            noite: document.getElementById('remedio-noite'),
        };

        let remedioAtual = null;

        function renderRemedios() {
            // Limpa as listas antes de renderizar
            for (const periodo in listas) {
                listas[periodo].innerHTML = '';
            }

            remedios.forEach(remedio => {
                const item = document.createElement('li');
                const horarioAtual = new Date();
                const horarioRemedio = new Date();
                const [hora, minuto] = remedio.horario.split(':');
                horarioRemedio.setHours(hora, minuto, 0);

                // L√≥gica para verificar se o rem√©dio j√° passou do hor√°rio
                const isLate = !remedio.tomado && horarioAtual > horarioRemedio;

                item.className = `list-group-item d-flex justify-content-between align-items-center remedio-item ${remedio.tomado ? 'taken' : isLate ? 'late' : 'pending'}`;
                item.innerHTML = `
                    <div class="remedio-info">
                        <span>${remedio.tomado ? '‚úÖ' : isLate ? '‚ö†Ô∏è' : '‚è≥'}</span>
                        <strong>${remedio.nome}</strong> - ${remedio.horario}
                    </div>
                    <div>
                        <button class="btn btn-lg btn-success me-2" onclick="marcarTomado(${remedio.id}, true)">Tomado</button>
                        <button class="btn btn-lg btn-danger" onclick="marcarTomado(${remedio.id}, false)">N√£o Tomado</button>
                    </div>
                `;
                listas[remedio.periodo].appendChild(item);
            });
        }

        function marcarTomado(id, tomado) {
            const remedio = remedios.find(r => r.id === id);
            if (remedio) {
                remedio.tomado = tomado;
                if (!remedio.tomado && !remedio.modalShown) {
                    // Se o rem√©dio n√£o foi tomado e o hor√°rio j√° passou, mostra o alerta
                    remedioAtual = remedio;
                    showAlert(remedio);
                }
                renderRemedios();
            }
        }

        function showAlert(remedio) {
            const modal = new bootstrap.Modal(document.getElementById('remedioModal'));
            document.getElementById('remedioAlertText').innerText = `O rem√©dio ${remedio.nome} n√£o foi tomado at√© o hor√°rio.`;
            modal.show();
        }

        function marcarTomadoAtual() {
            if (remedioAtual) {
                remedioAtual.tomado = true;
                remedioAtual.modalShown = true;
                renderRemedios();
                const modal = bootstrap.Modal.getInstance(document.getElementById('remedioModal'));
                modal.hide();
            }
        }

        function changeDate(offset) {
            const currentDateElement = document.getElementById('current-date');
            const currentDayElement = document.getElementById('current-day');

            const currentDate = new Date();
            currentDate.setDate(currentDate.getDate() + offset);

            const newDate = currentDate.toLocaleDateString('pt-BR');
            const newDay = currentDate.toLocaleString('pt-BR', { weekday: 'long' });

            currentDateElement.innerText = newDate;
            currentDayElement.innerText = newDay;

            renderRemedios();
        }

        renderRemedios(); // Inicializa os rem√©dios
    </script>
</body>
</html>
